
# クリーンアーキテクチャの用語まとめ

関心事の分離という同じ目的を持っている。

以下のような特性を持つシステムを生み出す。
- フレームワーク非依存
- テスト可能
- UI 非依存
- データベース非依存
  - SQL Server を Mongo や CoreData などの別のデータベースに置き換えることができること
- 外部エージェント非依存
![代表的な図](../images/20210802_07.54.jpg)

- UseCase
- Repository
- Interactor
- Controller



- ビジネスロジック
  - システムにおける実際のロジック部分
  - 入力に対して処理を行い、View に反映させる部分やデータベースを更新する部分


## エンティティー Entities

エンティティーは最重要ビジネスルールをカプセル化したもの。エンティティーはメソッドを持ったオブジェクトやデータ構造、関数でも良い。重要なのは、さまざまなアプリケーション(単一の場合はアプリのビジネスオブジェクト)からそのエンティティーを使用できることです。
それは、もっとも一般的で最上位レベルのルールや外部が変化しても影響を受けないもののことです。
  - Enterprise Business Rules
  - ビジネスロジックを表現するレイヤー



## ユースケース UseCase
ユースケースのレイヤーには、アプリケーション固有のビジネスルールが含まれています。ここでは、全てのユースケースがカプセル化・実装されています。ユースケースの目標を達成できるようにエンティティーに入出力するデータの流れを調整し、ユースケースの目標を達成できるように、エンティティに最重要ビジネスルールを使用するように指示を出します。
  - Application Business Rules
  - ビジネスロジックの API
  - interface や抽象クラス



- ## インターフェイスアダプター Interface Adapters
ユースケースやエンティティーに便利なフォーマットからデータベースやウェブなどの外部エージェンとに便利なフォーマットにデータを変換するアダプタのことです。
例えば、GUI の MVC アーキテクチャの ViewController を保持するのはこのレイヤーで、つまり、プレゼンタやビュー、コントローラーはこのレイヤーに属しています。モデルはコントローラーからユースケースに渡され、ユースケースからプレゼンタやビューに戻されるデータ構造です。
同様に、このレイヤーでは、エンティティーやユースケースに便利な形式から、データベースに便利な形式としてデータを変換します。

  - Controllers
  - 入力、永続化、出力が所属
  - 単体テストクラスもここに所属

- UI,DB,ExternalInterface など
  - Frameworks & Drivers
  - UI もここに含まれる。つまり、このレイヤーは、誰からも依存されないため、どんな変更を行なってもその上のレイヤーはその変更を知らない。


## UseCaseの役割
>ユースケースとは、
>利用者があるシステムを用いて特定の目的を達するまでの、双方の間のやり取りを明確に定義したもの
>(https://e-words.jp/w/%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9.htmlから引用)

UML でいうユースケース図で、アクター(人やシステム)が必要とする要件のこと。



## DIコンテナ
抽象化されたクラスに実際の具象化されたクラスを注入するためのものです。


## 依存性のルール
コードの依存性は外側から内側に向かっていなければならない.
円の内側は円の外側について何も知らない。円の外側から、内側に影響を及ぼしてはいけない。
