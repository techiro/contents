# はじめに

今回の記事は，アプリ開発によく使われているアーキテクチャについてです．
私自身，学習者なのですが，ある程度知識が溜まってきたので一旦整理します．

まず，MVVM を例に取ると，Model,View,ViewModel があります．

この代替の意味はわかるのですが，これらをもっと細かく見てみると，ViewModel には外部 API (Firebase や AWS など)と通信する ViewModel を作成することが多いかと思います．

そこでディレクトリ構造を，外部 API に対応したディレクトリ構造にすることで，よりクリーンなコードの管理ができると考えています．

# ディレクトリ構造

- UI
  - View
  - Model
  - ViewModel
- Data
  - Service
  - API
  - Model

このようなディレクトリ構造にする．

こうすることで，外部との通信は Data ディレクトリを見ることで参照でき UI ディレクトリでは View のコードと理解しやすいです．

UI ディレクトリに関しては今回は触れずに，Data ディレクトリの役割について話したいと思います．

- Data
  - Service
  - API
  - Model

# 様々な呼び方

これらの名前は様々で 1 例に過ぎません．
例えば，
Service → Remote, Repesitory
API → DataSource

### Service の立ち位置

サービスやリモートと呼ばれるフォルダには，実際のアプリで使用するクラスに変換したオブジェクトを返すクラスを宣言します．
例えば，Firebase 認証を実装する際に，Firebase.User クラスをオブジェクトとして返します．そのまま使用しても良いのですが，ここで Service を介すことで，Firebase.User を自作した AppUser クラスに変換する処理を行い，オブジェクトをより使いやすくできます．
その理由の 1 つに，この Service を使う側は必ず自作した AppUser オブジェクトを返してくれるため，全く Firebase のことを考えなくて済むといったメリットがあります．
反対に，実装が面倒というデメリットはありますが，一度この方法を覚えるとコードの可読性や再利用性が上がります．

### API の立ち位置

API という単語は Web やアプリ開発者にとっては聞き馴染みのある単語だと思います．
実際に，API はデータを受け取るために何かしらのデータを送信する部分という認識です．
そのためこの API フォルダには，開発者がデータを送信するための場所です．
DataSource とも表現されデータを送受信する部分だと考えてもらえればよいです．
Service との違いは，Service は開発者が定義した関数を叩き，情報を受取る場所，API は Service からリクエストされた処理を外部 API を叩いてそのまま Service に返す．といったあくまでも裏方の仕事をする場所です．

### Model の立ち位置

Service に付随して，宣言するモデルを定義．個々では AppUser のようなものを定義する．
